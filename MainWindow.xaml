<Window x:Class="SystemOptimizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SystemOptimizer"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        mc:Ignorable="d"
        Title="Effinitum X" Height="680" Width="1000"
        Icon="Resources/AppIcon.ico"
        Visibility="Visible"
        WindowStartupLocation="CenterScreen"
        Topmost="True"
        Loaded="MainWindow_Loaded">
    <Window.Resources>
        <Style x:Key="MenuButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="8,5"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <!-- Конвертеры для UWP Apps -->
        <BooleanToVisibilityConverter x:Key="BoolToVisConverter"/>
        
        <local:BoolToYesNoConverter x:Key="BoolToYesNoConverter"/>
        <local:BoolToInverseConverter x:Key="BoolToInverseConverter"/>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Top Menu -->
        <Menu Grid.Row="0">
            <MenuItem Header="File">
                <MenuItem Header="Exit" Click="MenuExit_Click"/>
            </MenuItem>
            <MenuItem Header="Tools">
                <MenuItem Header="Settings" Click="MenuSettings_Click"/>
                <MenuItem Header="Check for Updates" Click="MenuCheckUpdates_Click"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="About" Click="MenuAbout_Click"/>
            </MenuItem>
        </Menu>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Panel -->
            <ui:NavigationView Grid.Column="0" x:Name="navView" 
                               PaneDisplayMode="Left" 
                               IsSettingsVisible="False"
                               IsBackButtonVisible="Collapsed"
                               SelectionChanged="NavigationView_SelectionChanged">
                <ui:NavigationView.MenuItems>
                    <ui:NavigationViewItem Content="Welcome" Tag="welcome">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE80F;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                                    <ui:NavigationViewItem Content="System Information" Tag="systemInfo">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE946;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="System Cleanup" Tag="cleaner">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE74D;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Disk Analyzer" Tag="diskAnalyzer">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE7F4;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Disk Optimization" Tag="diskOptimization">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE90F;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Enhanced Optimizer" Tag="enhancedOptimizer">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xEA80;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Processes" Tag="processes">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE768;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Startup" Tag="startup">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE7B3;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="UWP Apps" Tag="uwpApps">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE71D;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Windows Defender" Tag="defender">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE72E;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Windows Updates" Tag="updates">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE896;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Zapret-Discord-YouTube" Tag="zapret">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE774;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                <ui:NavigationViewItem Content="Settings" Tag="settings">
                    <ui:NavigationViewItem.Icon>
                        <ui:FontIcon Glyph="&#xE713;" />
                    </ui:NavigationViewItem.Icon>
                </ui:NavigationViewItem>
                </ui:NavigationView.MenuItems>
            </ui:NavigationView>
            
            <!-- Main Content -->
            <Grid Grid.Column="1" Margin="20">
                <!-- Welcome Page -->
                <Grid x:Name="welcomePage">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Image Source="Resources/logo.png" Width="128" Height="128" Margin="0,0,0,20"/>
                        <TextBlock Text="Effinitum X" FontSize="32" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="Welcome to Effinitum X" FontSize="24" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,20,0,0"/>
                        <TextBlock Text="Select an option from the menu to get started" FontSize="16" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                        <TextBlock Text="Created by Nicet ink" FontSize="12" HorizontalAlignment="Center" Margin="0,30,0,0" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Grid>
                
                <!-- System Information Page -->
                <Grid x:Name="systemInfoPage" Visibility="Collapsed">
                    <ScrollViewer>
                        <StackPanel>
                            <TextBlock Text="System Information" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                            
                            <Expander Header="Operating System" IsExpanded="True" Margin="0,0,0,10">
                                <ListView x:Name="lvSystemInfo" BorderThickness="0">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="{Binding Key}" FontWeight="SemiBold"/>
                                                <TextBlock Grid.Column="1" Text="{Binding Value}"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Expander>
                            
                            <Expander Header="Memory Usage" IsExpanded="True" Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <ProgressBar x:Name="pbMemory" Height="20" Maximum="100" Value="50" Margin="0,10"/>
                                    <TextBlock x:Name="tbMemoryUsage" Text="Used: 8 GB of 16 GB (50%)" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Expander>
                            
                            <Expander Header="Disk Information" IsExpanded="True" Margin="0,0,0,10">
                                <ListView x:Name="lvDiskInfo" BorderThickness="0">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="{Binding Key}" FontWeight="SemiBold"/>
                                                <TextBlock Grid.Column="1" Text="{Binding Value}"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Expander>
                            
                            <Button Content="Refresh" HorizontalAlignment="Left" Click="RefreshSystemInfo_Click" Margin="0,10,0,0"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
                
                <!-- System Cleanup Page -->
                <Grid x:Name="cleanerPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="System Cleanup" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="10">
                            <CheckBox x:Name="cbTempFiles" Content="Temporary Files" IsChecked="True"/>
                            <CheckBox x:Name="cbRecycleBin" Content="Recycle Bin" IsChecked="True"/>
                            <CheckBox x:Name="cbBrowserCache" Content="Browser Cache" IsChecked="True"/>
                            <CheckBox x:Name="cbWindowsLogs" Content="Windows Logs" IsChecked="True"/>
                            <CheckBox x:Name="cbWindowsUpdate" Content="Windows Update Cache" IsChecked="True"/>
                            
                            <Button x:Name="btnStartCleaning" Content="Start Cleanup" 
                                    HorizontalAlignment="Left" Margin="0,15,0,0" 
                                    Click="btnStartCleaning_Click" Padding="20,5"/>
                                    
                            <ui:ProgressRing x:Name="cleanupProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                        </ui:SimpleStackPanel>
                        
                        <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                        
                        <StackPanel>
                            <TextBlock Text="Cleanup Results" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                            <TextBlock x:Name="tbCleaningResult" Text="Click 'Start Cleanup' to optimize your system" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Disk Analyzer Page -->
                <Grid x:Name="diskAnalyzerPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Disk Analyzer" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <ComboBox x:Name="cbDrives" Width="200">
                                <ComboBox.Resources>
                                    <Style TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
                                        <Setter Property="ui:ControlHelper.PlaceholderText" Value="Select Drive"/>
                                    </Style>
                                </ComboBox.Resources>
                            </ComboBox>
                            <Button x:Name="btnAnalyzeDisk" Content="Analyze" Click="btnAnalyzeDisk_Click"/>
                            <ui:ProgressRing x:Name="diskAnalysisProgress" Visibility="Collapsed" IsActive="False" Width="20" Height="20"/>
                        </ui:SimpleStackPanel>
                        
                        <ListView x:Name="lvFolderSize" Height="400" BorderThickness="1" 
                                  BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Path" Width="500" DisplayMemberBinding="{Binding Path}"/>
                                    <GridViewColumn Header="Size" Width="150" DisplayMemberBinding="{Binding Size}"/>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </Grid>
                
                <!-- Process Manager Page -->
                <Grid x:Name="processesPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Process Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <TextBox x:Name="tbProcessFilter" Width="300" ui:ControlHelper.PlaceholderText="Filter processes..." />
                            <Button x:Name="btnRefreshProcesses" Content="Refresh" Click="btnRefreshProcesses_Click"/>
                        </ui:SimpleStackPanel>
                        
                        <DataGrid x:Name="dgProcesses" AutoGenerateColumns="False" IsReadOnly="True" Height="400"
                                 BorderThickness="1" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="80"/>
                                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200"/>
                                <DataGridTextColumn Header="Memory (MB)" Binding="{Binding MemoryUsage, StringFormat={}{0:F2}}" Width="120"/>
                                <DataGridTextColumn Header="CPU %" Binding="{Binding CpuUsage, StringFormat={}{0:F2}}" Width="100"/>
                                <DataGridTextColumn Header="Start Time" Binding="{Binding StartTime}" Width="180"/>
                                <DataGridTemplateColumn Header="Actions" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="End Task" 
                                                    Command="{Binding KillProcessCommand}"
                                                    Padding="10,2"
                                                    Background="IndianRed"
                                                    Foreground="White"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Grid>
                
                <!-- Startup Manager Page -->
                <Grid x:Name="startupPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Startup Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <Button x:Name="btnLoadStartupItems" Content="Load Startup Items" Click="btnLoadStartupItems_Click"/>
                            <Button x:Name="btnOptimizeStartup" Content="Optimize Startup" Click="btnOptimizeStartup_Click"/>
                            <ui:ProgressRing x:Name="startupProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25"/>
                        </ui:SimpleStackPanel>
                        
                        <ListView x:Name="lvStartupItems" Height="400" BorderThickness="1" 
                                 BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Enabled" Width="80">
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <ui:ToggleSwitch IsOn="{Binding IsEnabled, Mode=TwoWay}" Toggled="StartupItem_Toggled"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                    <GridViewColumn Header="Name" Width="200" DisplayMemberBinding="{Binding Name}"/>
                                    <GridViewColumn Header="Command" Width="250" DisplayMemberBinding="{Binding Command}"/>
                                    <GridViewColumn Header="Publisher" Width="150" DisplayMemberBinding="{Binding Publisher}"/>
                                </GridView>
                            </ListView.View>
                        </ListView>
                        
                        <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                        
                        <StackPanel>
                            <TextBlock Text="Operation Result" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                            <TextBlock x:Name="tbStartupResult" Text="Click 'Load Startup Items' to load startup items" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Disk Optimization Page -->
                <Grid x:Name="diskOptimizationPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Disk Optimization" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="10">
                            <TextBlock Text="Select Drive:" FontWeight="SemiBold"/>
                            <ComboBox x:Name="cbOptimizeDrives" Width="200" Margin="0,0,0,10">
                                <ComboBox.Resources>
                                    <Style TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
                                        <Setter Property="ui:ControlHelper.PlaceholderText" Value="Select Drive"/>
                                    </Style>
                                </ComboBox.Resources>
                            </ComboBox>
                            
                            <GroupBox Header="Optimization Options" Padding="10">
                                <ui:SimpleStackPanel Spacing="5">
                                    <CheckBox x:Name="cbCheckDisk" Content="Check disk for errors (CHKDSK)" IsChecked="True" Margin="0,5"/>
                                    <CheckBox x:Name="cbDefragment" Content="Defragment disk (optimizes file placement)" IsChecked="True" Margin="0,5"/>
                                    <CheckBox x:Name="cbCleanupDisk" Content="Clean up disk (removes temporary files)" IsChecked="True" Margin="0,5"/>
                                    <CheckBox x:Name="cbTrimSSD" Content="Run TRIM command (for SSD only)" IsChecked="True" Margin="0,5"/>
                                    <TextBlock Text="Note: Some operations may require administrator rights." FontStyle="Italic" Margin="0,5" TextWrapping="Wrap"/>
                                </ui:SimpleStackPanel>
                            </GroupBox>
                            
                            <Button x:Name="btnStartOptimization" Content="Start Optimization" 
                                    HorizontalAlignment="Left" Margin="0,15,0,0"
                                    Click="btnStartOptimization_Click" Padding="20,5"/>
                                    
                            <ui:ProgressRing x:Name="diskOptimizationProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,10,0,10" />
                            
                            <TextBlock Text="Optimization Results:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            <TextBlock x:Name="tbOptimizationResult" Text="Click 'Start Optimization' to begin the disk optimization process" TextWrapping="Wrap"/>
                        </ui:SimpleStackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Enhanced System Optimizer Page -->
                <Grid x:Name="enhancedOptimizerPage" Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="0,0,10,0">
                            <TextBlock Text="Enhanced System Optimizer" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                            
                            <TextBlock Text="This tool provides advanced system optimization with multiple tweaking options. Choose the components to optimize and the optimization level." 
                                       TextWrapping="Wrap" Margin="0,0,0,15"/>
                            
                            <GroupBox Header="Optimization Components" Padding="15,10">
                                <ui:SimpleStackPanel Spacing="8">
                                    <CheckBox x:Name="cbOptimizePerformance" Content="System Performance" IsChecked="True" ToolTip="Optimize Windows visual effects and background services"/>
                                    <CheckBox x:Name="cbOptimizeDisk" Content="Disk Space and Performance" IsChecked="True" ToolTip="Clean temporary files and optimize disk access"/>
                                    <CheckBox x:Name="cbOptimizeMemory" Content="Memory Usage" IsChecked="True" ToolTip="Configure virtual memory and pagefile settings"/>
                                    <CheckBox x:Name="cbOptimizeStartup" Content="System Startup" IsChecked="True" ToolTip="Disable unnecessary startup items"/>
                                    <CheckBox x:Name="cbOptimizeBrowser" Content="Browsers" IsChecked="True" ToolTip="Clean browser cache and optimize settings"/>
                                    <CheckBox x:Name="cbOptimizeNetwork" Content="Network Performance" IsChecked="True" ToolTip="Optimize TCP/IP settings and connectivity"/>
                                </ui:SimpleStackPanel>
                            </GroupBox>
                            
                            <GroupBox Header="Optimization Level" Margin="0,15,0,0" Padding="15,10">
                                <ui:SimpleStackPanel Spacing="10">
                                    <RadioButton x:Name="rbLightOptimization" Content="Light: Basic optimizations, safe for all systems" IsChecked="True" GroupName="OptimizationLevel"/>
                                    <RadioButton x:Name="rbMediumOptimization" Content="Medium: Moderate optimizations, recommended for most users" GroupName="OptimizationLevel"/>
                                    <RadioButton x:Name="rbAggresiveOptimization" Content="Aggressive: Maximum optimizations, for power users" GroupName="OptimizationLevel"/>
                                    
                                    <TextBlock Text="Note: Higher optimization levels may disable more features but provide better performance." 
                                               FontStyle="Italic" TextWrapping="Wrap" Margin="0,5,0,0"/>
                                </ui:SimpleStackPanel>
                            </GroupBox>
                            
                            <Button x:Name="btnStartEnhancedOptimization" Content="Start System Optimization" 
                                    HorizontalAlignment="Left" Margin="0,20,0,10"
                                    Click="btnStartEnhancedOptimization_Click" Padding="20,5"/>
                                    
                            <ui:ProgressRing x:Name="enhancedOptimizerProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,5,0,5"/>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,10,0,10" />
                            
                            <GroupBox Header="System Performance Monitor" Margin="0,5,0,15" Padding="15,10">
                                <Grid Height="230">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    
                                    <ui:SimpleStackPanel Orientation="Horizontal" Spacing="20" Margin="0,0,0,10">
                                        <ui:SimpleStackPanel>
                                            <TextBlock Text="CPU Usage:" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="tbCpuUsage" Text="0%" FontSize="20"/>
                                        </ui:SimpleStackPanel>
                                        
                                        <ui:SimpleStackPanel>
                                            <TextBlock Text="Memory Usage:" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="tbMemoryUsagePercent" Text="0%" FontSize="20"/>
                                        </ui:SimpleStackPanel>
                                        
                                        <ui:SimpleStackPanel>
                                            <TextBlock Text="Disk Activity:" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="tbDiskUsage" Text="0%" FontSize="20"/>
                                        </ui:SimpleStackPanel>
                                        
                                        <Button x:Name="btnRefreshPerformance" Content="Refresh" Click="btnRefreshPerformance_Click"
                                                VerticalAlignment="Bottom"/>
                                    </ui:SimpleStackPanel>
                                    
                                    <Canvas x:Name="performanceGraph" Grid.Row="1" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                                            Height="180">
                                        <!-- График будет отрисовываться программно -->
                                    </Canvas>
                                </Grid>
                            </GroupBox>
                            
                            <GroupBox Header="Optimization Results" Padding="15,10">
                                <ui:SimpleStackPanel Spacing="10">
                                    <TextBlock x:Name="tbEnhancedOptimizerResult" Text="Click 'Start System Optimization' to begin the optimization process" TextWrapping="Wrap"/>
                                    
                                    <ListView x:Name="lvOptimizationActions" Height="150" Visibility="Collapsed">
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="Optimization" Width="500"/>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </ui:SimpleStackPanel>
                            </GroupBox>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
                
                <!-- UWP Apps Page -->
                <Grid x:Name="uwpAppsPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="UWP Applications Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <Button x:Name="btnLoadUwpApps" Content="Load UWP Apps" Click="btnLoadUwpApps_Click"/>
                            <TextBox x:Name="tbUwpFilter" Width="300" ui:ControlHelper.PlaceholderText="Filter applications..." TextChanged="TbUwpFilter_TextChanged"/>
                        </ui:SimpleStackPanel>
                        
                        <ListView x:Name="lvUwpApps" Height="400" BorderThickness="1" 
                                 BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Name" Width="200" DisplayMemberBinding="{Binding Name}"/>
                                    <GridViewColumn Header="Publisher" Width="150" DisplayMemberBinding="{Binding Publisher}"/>
                                    <GridViewColumn Header="Version" Width="100" DisplayMemberBinding="{Binding Version}"/>
                                    <GridViewColumn Header="System App" Width="80">
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding IsSystem, Converter={StaticResource BoolToYesNoConverter}}"/>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                    <GridViewColumn Header="Actions" Width="100">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                <Button Content="Uninstall" 
                                                        Click="BtnUninstallUwp_Click"
                                                        Tag="{Binding PackageFamilyName}"
                                                        IsEnabled="{Binding IsSystem, Converter={StaticResource BoolToInverseConverter}}"
                                                        Padding="10,2"
                                                        Background="IndianRed"
                                                        Foreground="White"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                    </StackPanel>
                </Grid>
                
                <!-- Windows Defender Page -->
                <Grid x:Name="defenderPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Windows Defender Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="15">
                            <TextBlock Text="WARNING: Disabling Windows Defender may reduce your computer's security." 
                                       Foreground="Red" FontWeight="SemiBold" TextWrapping="Wrap"/>
                            
                            <TextBlock Text="Current status:" FontWeight="SemiBold"/>
                            <TextBlock x:Name="tbDefenderStatus" Text="Checking..." FontWeight="Normal"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                                <Button x:Name="btnDisableDefender" Content="Disable Windows Defender" 
                                        Click="btnDisableDefender_Click" Padding="15,5"
                                        Background="IndianRed" Foreground="White"/>
                                        
                                <Button x:Name="btnEnableDefender" Content="Enable Windows Defender" 
                                        Click="btnEnableDefender_Click" Padding="15,5"/>
                            </ui:SimpleStackPanel>
                            
                            <ui:ProgressRing x:Name="defenderProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                        </ui:SimpleStackPanel>
                        
                        <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                        
                        <StackPanel>
                            <TextBlock Text="Operation Result" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                            <TextBlock x:Name="tbDefenderResult" Text="Click one of the buttons above to perform an operation" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Windows Updates Page -->
                <Grid x:Name="updatesPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Windows Updates Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="15">
                            <TextBlock Text="WARNING: Disabling Windows updates may make your system more vulnerable to attacks." 
                                       Foreground="Red" FontWeight="SemiBold" TextWrapping="Wrap"/>
                            
                            <TextBlock Text="Current updates status:" FontWeight="SemiBold"/>
                            <TextBlock x:Name="tbUpdatesStatus" Text="Checking..." FontWeight="Normal"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                                <Button x:Name="btnDisableUpdates" Content="Disable Windows Updates" 
                                        Click="btnDisableUpdates_Click" Padding="15,5"
                                        Background="IndianRed" Foreground="White"/>
                                        
                                <Button x:Name="btnEnableUpdates" Content="Enable Windows Updates" 
                                        Click="btnEnableUpdates_Click" Padding="15,5"/>
                            </ui:SimpleStackPanel>
                            
                            <ui:ProgressRing x:Name="updatesProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                        </ui:SimpleStackPanel>
                        
                        <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                        
                        <StackPanel>
                            <TextBlock Text="Operation Result" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                            <TextBlock x:Name="tbUpdatesResult" Text="Click one of the buttons above to perform an operation" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Zapret-Discord-YouTube Page -->
                <Grid x:Name="zapretPage" Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Zapret-Discord-YouTube" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                            
                            <ui:SimpleStackPanel Spacing="15">
                                <TextBlock Text="Zapret-Discord-YouTube is a tool that helps bypass Discord and YouTube blocks in restricted regions." 
                                           TextWrapping="Wrap"/>
                                
                                <TextBlock Text="NOTE: This tool requires administrator rights to work."
                                           FontWeight="SemiBold" TextWrapping="Wrap"/>
                                
                                <GroupBox Header="Status" Padding="15,10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Installation:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="tbZapretStatus" Text="Checking..." Margin="0,0,0,5"/>
                                        
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Version:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="tbZapretVersion" Text="Not installed" Margin="0,0,0,5"/>
                                        
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Running:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="tbZapretRunning" Text="No" Margin="0,0,0,5"/>
                                        
                                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Discord:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                                        <ui:SimpleStackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                            <TextBlock x:Name="tbDiscordStatus" Text="Disabled"/>
                                            <ToggleButton x:Name="toggleDiscord" Click="toggleDiscord_Click" IsEnabled="False"/>
                                        </ui:SimpleStackPanel>
                                        
                                        <TextBlock Grid.Row="4" Grid.Column="0" Text="YouTube:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                                        <ui:SimpleStackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                            <TextBlock x:Name="tbYouTubeStatus" Text="Disabled"/>
                                            <ToggleButton x:Name="toggleYouTube" Click="toggleYouTube_Click" IsEnabled="False"/>
                                        </ui:SimpleStackPanel>
                                    </Grid>
                                </GroupBox>
                                
                                <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                                    <Button x:Name="btnInstallZapret" Content="Install Zapret-Discord-YouTube" 
                                            Click="btnInstallZapret_Click" Padding="15,5"/>
                                            
                                    <Button x:Name="btnUninstallZapret" Content="Uninstall Zapret-Discord-YouTube" 
                                            Click="btnUninstallZapret_Click" Padding="15,5"/>
                                    
                                    <Button x:Name="btnRefreshZapretStatus" Content="Refresh Status" 
                                            Click="btnRefreshZapretStatus_Click" Padding="15,5"/>
                                </ui:SimpleStackPanel>
                                
                                <ui:ProgressRing x:Name="zapretProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                            </ui:SimpleStackPanel>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                            
                            <StackPanel>
                                <TextBlock Text="Operation Result" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <TextBlock x:Name="tbZapretResult" Text="Click one of the buttons above to perform an operation" TextWrapping="Wrap"/>
                                
                                <TextBlock Text="Project Information:" FontWeight="SemiBold" Margin="0,20,0,5"/>
                                <TextBlock TextWrapping="Wrap" Margin="0,0,0,5">
                                    <Run>Zapret-Discord-YouTube is an open source project available on GitHub: </Run>
                                    <Hyperlink NavigateUri="https://github.com/Flowseal/zapret-discord-youtube" RequestNavigate="Hyperlink_RequestNavigate">
                                        https://github.com/Flowseal/zapret-discord-youtube
                                    </Hyperlink>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
                
                <!-- Settings Page -->
                <Grid x:Name="settingsPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Settings" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="15">
                            <TextBlock Text="APPEARANCE" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="Theme:" VerticalAlignment="Center" Width="150"/>
                                <RadioButton x:Name="rbLightTheme" Content="Light" GroupName="Theme" IsChecked="True" Checked="ThemeRadioButton_Checked"/>
                                <RadioButton x:Name="rbDarkTheme" Content="Dark" GroupName="Theme" Checked="ThemeRadioButton_Checked"/>
                                <RadioButton x:Name="rbSystemTheme" Content="Use System Setting" GroupName="Theme" Checked="ThemeRadioButton_Checked"/>
                            </ui:SimpleStackPanel>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,5"/>
                            
                            <TextBlock Text="SYSTEM OPTIMIZATION" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <CheckBox x:Name="cbRunAtStartup" Content="Run at Windows startup"/>
                            <CheckBox x:Name="cbMinimizeToTray" Content="Minimize to system tray instead of taskbar"/>
                            <CheckBox x:Name="cbEnableNotifications" Content="Show system notifications" IsChecked="True"/>
                            <CheckBox x:Name="cbCheckUpdatesAtStartup" Content="Check for updates at startup" IsChecked="True"/>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,5"/>
                            
                            <TextBlock Text="ADVANCED" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="Cleanup Aggressiveness:" VerticalAlignment="Center" Width="150"/>
                                <Slider x:Name="sliderCleanupLevel" Width="200" Minimum="1" Maximum="3" Value="2" 
                                        TickPlacement="BottomRight" TickFrequency="1" IsSnapToTickEnabled="True"/>
                                <TextBlock x:Name="tbCleanupLevel" Text="Normal" VerticalAlignment="Center"/>
                            </ui:SimpleStackPanel>
                            
                            <Button Content="Save Settings" HorizontalAlignment="Left" Margin="0,15,0,0" Click="SaveSettings_Click"/>
                        </ui:SimpleStackPanel>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Window>
