<Window x:Class="SystemOptimizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SystemOptimizer"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        mc:Ignorable="d"
        Title="Effinitum X" Height="680" Width="1000"
        Icon="Resources/AppIcon.ico">
    <Window.Resources>
        <Style x:Key="MenuButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="8,5"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Top Menu -->
        <Menu Grid.Row="0">
            <MenuItem Header="File">
                <MenuItem Header="Exit" Click="MenuExit_Click"/>
            </MenuItem>
            <MenuItem Header="Tools">
                <MenuItem Header="Settings" Click="MenuSettings_Click"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="About" Click="MenuAbout_Click"/>
            </MenuItem>
        </Menu>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Panel -->
            <Border Grid.Column="0" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" BorderThickness="0,0,1,0" BorderBrush="{DynamicResource SystemControlBackgroundListMediumBrush}">
                <StackPanel Margin="5,10">
                    <Image Source="Resources/logo.png" Width="64" Height="64" Margin="0,10,0,20" HorizontalAlignment="Left"/>
                    
                    <TextBlock Text="EFFINITUM X" Margin="10,5" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                    <TextBlock Text="By Nicet ink" Margin="10,0,10,15" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    
                    <TextBlock Text="SYSTEM TOOLS" Margin="10,5" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                    
                    <Button x:Name="btnSystemInfo" Content="System Information" Style="{StaticResource MenuButtonStyle}" Click="btnSystemInfo_Click"/>
                    
                    <Button x:Name="btnCleaner" Content="System Cleanup" Style="{StaticResource MenuButtonStyle}" Click="btnCleaner_Click"/>
                    
                    <Button x:Name="btnDiskAnalyzer" Content="Disk Analyzer" Style="{StaticResource MenuButtonStyle}" Click="btnDiskAnalyzer_Click"/>
                    
                    <Button x:Name="btnProcesses" Content="Process Manager" Style="{StaticResource MenuButtonStyle}" Click="btnProcesses_Click"/>
                    
                    <Button x:Name="btnStartup" Content="Startup Manager" Style="{StaticResource MenuButtonStyle}" Click="btnStartup_Click"/>
                    
                    <TextBlock Text="SETTINGS" Margin="10,20,5,5" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                    
                    <Button x:Name="btnSettings" Content="Settings" Style="{StaticResource MenuButtonStyle}" Click="MenuSettings_Click"/>
                </StackPanel>
            </Border>
            
            <!-- Main Content -->
            <Grid Grid.Column="1" Margin="20">
                <!-- Welcome Page -->
                <Grid x:Name="welcomePage">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Image Source="Resources/logo.png" Width="128" Height="128" Margin="0,0,0,20"/>
                        <TextBlock Text="Effinitum X" FontSize="32" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="Welcome to Effinitum X" FontSize="24" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,20,0,0"/>
                        <TextBlock Text="Select an option from the menu to get started" FontSize="16" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                        <TextBlock Text="Created by Nicet ink" FontSize="12" HorizontalAlignment="Center" Margin="0,30,0,0" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Grid>
                
                <!-- System Information Page -->
                <Grid x:Name="systemInfoPage" Visibility="Collapsed">
                    <ScrollViewer>
                        <StackPanel>
                            <TextBlock Text="System Information" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                            
                            <Expander Header="Operating System" IsExpanded="True" Margin="0,0,0,10">
                                <ListView x:Name="lvSystemInfo" BorderThickness="0">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="{Binding Key}" FontWeight="SemiBold"/>
                                                <TextBlock Grid.Column="1" Text="{Binding Value}"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Expander>
                            
                            <Expander Header="Memory Usage" IsExpanded="True" Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <ProgressBar x:Name="pbMemory" Height="20" Maximum="100" Value="50" Margin="0,10"/>
                                    <TextBlock x:Name="tbMemoryUsage" Text="Used: 8 GB of 16 GB (50%)" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Expander>
                            
                            <Expander Header="Disk Information" IsExpanded="True" Margin="0,0,0,10">
                                <ListView x:Name="lvDiskInfo" BorderThickness="0">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="{Binding Key}" FontWeight="SemiBold"/>
                                                <TextBlock Grid.Column="1" Text="{Binding Value}"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Expander>
                            
                            <Button Content="Refresh" HorizontalAlignment="Left" Click="RefreshSystemInfo_Click" Margin="0,10,0,0"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
                
                <!-- System Cleanup Page -->
                <Grid x:Name="cleanerPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="System Cleanup" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="10">
                            <CheckBox x:Name="cbTempFiles" Content="Temporary Files" IsChecked="True"/>
                            <CheckBox x:Name="cbRecycleBin" Content="Recycle Bin" IsChecked="True"/>
                            <CheckBox x:Name="cbBrowserCache" Content="Browser Cache" IsChecked="True"/>
                            <CheckBox x:Name="cbWindowsLogs" Content="Windows Logs" IsChecked="True"/>
                            <CheckBox x:Name="cbWindowsUpdate" Content="Windows Update Cache" IsChecked="True"/>
                            
                            <Button x:Name="btnStartCleaning" Content="Start Cleanup" 
                                    HorizontalAlignment="Left" Margin="0,15,0,0" 
                                    Click="btnStartCleaning_Click" Padding="20,5"/>
                                    
                            <ui:ProgressRing x:Name="cleanupProgress" Visibility="Collapsed" IsActive="False" Width="25" Height="25" Margin="0,10,0,0"/>
                        </ui:SimpleStackPanel>
                        
                        <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,20,0,15" />
                        
                        <StackPanel>
                            <TextBlock Text="Cleanup Results" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,10"/>
                            <TextBlock x:Name="tbCleaningResult" Text="Click 'Start Cleanup' to optimize your system" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Disk Analyzer Page -->
                <Grid x:Name="diskAnalyzerPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Disk Analyzer" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <ComboBox x:Name="cbDrives" Width="200">
                                <ComboBox.Resources>
                                    <Style TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
                                        <Setter Property="ui:ControlHelper.PlaceholderText" Value="Select Drive"/>
                                    </Style>
                                </ComboBox.Resources>
                            </ComboBox>
                            <Button x:Name="btnAnalyzeDisk" Content="Analyze" Click="btnAnalyzeDisk_Click"/>
                            <ui:ProgressRing x:Name="diskAnalysisProgress" Visibility="Collapsed" IsActive="False" Width="20" Height="20"/>
                        </ui:SimpleStackPanel>
                        
                        <ListView x:Name="lvFolderSize" Height="400" BorderThickness="1" 
                                  BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Path" Width="500" DisplayMemberBinding="{Binding Path}"/>
                                    <GridViewColumn Header="Size" Width="150" DisplayMemberBinding="{Binding Size}"/>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </StackPanel>
                </Grid>
                
                <!-- Process Manager Page -->
                <Grid x:Name="processesPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Process Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,15">
                            <TextBox x:Name="tbProcessFilter" Width="300">
                                <TextBox.Resources>
                                    <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
                                        <Setter Property="ui:ControlHelper.PlaceholderText" Value="Filter processes..."/>
                                    </Style>
                                </TextBox.Resources>
                            </TextBox>
                            <Button x:Name="btnRefreshProcesses" Content="Refresh" Click="btnRefreshProcesses_Click"/>
                        </ui:SimpleStackPanel>
                        
                        <DataGrid x:Name="dgProcesses" AutoGenerateColumns="False" 
                                 IsReadOnly="True" SelectionMode="Single" Height="400" 
                                 BorderThickness="1" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="80"/>
                                <DataGridTextColumn Header="Process Name" Binding="{Binding Name}" Width="*"/>
                                <DataGridTextColumn Header="Memory (MB)" Binding="{Binding MemoryUsage}" Width="100"/>
                                <DataGridTextColumn Header="CPU %" Binding="{Binding CpuUsage}" Width="70"/>
                                <DataGridTextColumn Header="Start Time" Binding="{Binding StartTime}" Width="150"/>
                                <DataGridTemplateColumn Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="End Task" 
                                                    Foreground="Red"
                                                    Command="{Binding KillProcessCommand}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Grid>
                
                <!-- Startup Manager Page -->
                <Grid x:Name="startupPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Startup Manager" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <StackPanel>
                            <Button x:Name="btnLoadStartupItems" Content="Load Startup Items" 
                                    HorizontalAlignment="Left" Click="btnLoadStartupItems_Click"/>
                                    
                            <ui:ProgressRing x:Name="startupProgress" Visibility="Collapsed" IsActive="False" Width="20" Height="20" Margin="0,10"/>
                            
                            <ListView x:Name="lvStartupItems" Height="300" Margin="0,15,0,0" 
                                      BorderThickness="1" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Name" Width="200" DisplayMemberBinding="{Binding Name}"/>
                                        <GridViewColumn Header="Publisher" Width="200" DisplayMemberBinding="{Binding Publisher}"/>
                                        <GridViewColumn Header="Command" Width="300" DisplayMemberBinding="{Binding Command}"/>
                                        <GridViewColumn Header="Status" Width="100">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <ui:ToggleSwitch IsOn="{Binding IsEnabled, Mode=TwoWay}" Toggled="StartupItem_Toggled"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                            
                            <Button x:Name="btnOptimizeStartup" Content="Optimize All Startup Items" 
                                    Margin="0,15,0,0" HorizontalAlignment="Left" Click="btnOptimizeStartup_Click"/>
                            
                            <TextBlock x:Name="tbStartupResult" Text="Click 'Load Startup Items' to view programs that run on system startup"
                                      Margin="0,15,0,0" TextWrapping="Wrap"/>
                                      
                            <TextBlock Text="Optimizing startup items helps speed up your system boot time by disabling unnecessary programs that run at Windows startup."
                                      TextWrapping="Wrap" Margin="0,10,0,0" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
                
                <!-- Settings Page -->
                <Grid x:Name="settingsPage" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="Settings" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>
                        
                        <ui:SimpleStackPanel Spacing="15">
                            <TextBlock Text="APPEARANCE" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="Theme:" VerticalAlignment="Center" Width="150"/>
                                <RadioButton x:Name="rbLightTheme" Content="Light" GroupName="Theme" IsChecked="True" Checked="ThemeRadioButton_Checked"/>
                                <RadioButton x:Name="rbDarkTheme" Content="Dark" GroupName="Theme" Checked="ThemeRadioButton_Checked"/>
                                <RadioButton x:Name="rbSystemTheme" Content="Use System Setting" GroupName="Theme" Checked="ThemeRadioButton_Checked"/>
                            </ui:SimpleStackPanel>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,5"/>
                            
                            <TextBlock Text="SYSTEM OPTIMIZATION" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <CheckBox x:Name="cbRunAtStartup" Content="Run at Windows startup"/>
                            <CheckBox x:Name="cbMinimizeToTray" Content="Minimize to system tray instead of taskbar"/>
                            <CheckBox x:Name="cbEnableNotifications" Content="Show system notifications" IsChecked="True"/>
                            
                            <Border BorderThickness="0,1,0,0" BorderBrush="{DynamicResource SystemControlBackgroundBaseLowBrush}" Margin="0,5"/>
                            
                            <TextBlock Text="ADVANCED" FontWeight="SemiBold" Foreground="{DynamicResource SystemControlForegroundAccentBrush}"/>
                            
                            <ui:SimpleStackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="Cleanup Aggressiveness:" VerticalAlignment="Center" Width="150"/>
                                <Slider x:Name="sliderCleanupLevel" Width="200" Minimum="1" Maximum="3" Value="2" 
                                        TickPlacement="BottomRight" TickFrequency="1" IsSnapToTickEnabled="True"/>
                                <TextBlock x:Name="tbCleanupLevel" Text="Normal" VerticalAlignment="Center"/>
                            </ui:SimpleStackPanel>
                            
                            <Button Content="Save Settings" HorizontalAlignment="Left" Margin="0,15,0,0" Click="SaveSettings_Click"/>
                        </ui:SimpleStackPanel>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Window>
